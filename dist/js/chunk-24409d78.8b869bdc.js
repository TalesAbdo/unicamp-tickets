(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-24409d78"],{"2c0b":function(e,t,r){"use strict";var i=r("d2e9"),n=r.n(i);n.a},"59a2":function(e,t,r){"use strict";r.r(t);var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"services-container"},[r("div",{staticClass:"left-container"},[r("Button",{attrs:{icon:"fa-box",value:"Novo serviço"},on:{click:function(t){return e.modalControl("newService")}}})],1),r("div",{staticClass:"right-container"},[r("Title",{attrs:{titleValue:"Serviços"}}),e._l(e.services,function(t,i){return r("ServiceCard",{key:i,attrs:{service:t},on:{modalControl:e.modalControl}})})],2),r("ServiceControl",{attrs:{show:e.showServiceControl,oldService:e.oldService},on:{hide:function(t){return e.modalControl("close")}}})],1)},n=[],o=r("1163"),a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"modal service-control",class:{"is-active":e.show}},[r("div",{staticClass:"modal-background",on:{click:e.hide}}),r("form",{staticClass:"modal-content",attrs:{autocomplete:"off"}},[r("Title",{staticClass:"header-text",attrs:{titleValue:e.titleText}}),e.oldService.name?r("Input",{staticClass:"margin-rem",attrs:{inputTitle:"Nome",inputPlaceHolder:"o nome",preValue:e.oldService.name,maxLength:60},on:{input:e.setName}}):r("Input",{staticClass:"margin-rem",attrs:{inputTitle:"Nome",inputPlaceHolder:"o nome",preValue:e.service.name,maxLength:60},on:{input:e.setName}}),e.oldService.description?r("Textarea",{attrs:{vclass:"margin-rem",textareaTitle:"Descrição",textareaPlaceHolder:"a descrição",preValue:e.oldService.description,maxLength:200},on:{input:e.setDescription}}):r("Textarea",{staticClass:"margin-rem",attrs:{textareaTitle:"Descrição",textareaPlaceHolder:"a descrição",preValue:e.service.description,maxLength:200},on:{input:e.setDescription}}),r("div",{staticClass:"footer-buttons"},[r("button",{staticClass:"button is-black",attrs:{type:"button"},on:{click:e.createUpdateService}},[e._v(e._s(e.buttonText))]),e.oldService.id?r("button",{staticClass:"button is-danger is-inverted",attrs:{type:"button"},on:{click:e.deleteService}},[e._v(e._s(e.archiveText))]):e._e()])],1),r("button",{staticClass:"modal-close is-large",attrs:{"aria-label":"close"}})])},s=[],c=(r("96cf"),r("3b8d")),l=(r("7f7f"),r("16e0")),u=r("8fb7"),v=r("07dc"),d={name:"serviceControl",components:{Title:l["a"],Input:u["a"],Textarea:v["a"]},props:{show:{type:Boolean,default:!1},oldService:{type:Object,required:!0}},computed:{titleText:function(){return this.oldService.name?"Editar Serviço":"Novo Serviço"},buttonText:function(){return this.oldService.name?"Confirmar Alterações":"Criar Serviço"},archiveText:function(){return this.oldService.isActive?"Arquivar Serviço":"Desarquivar Serviço"}},data:function(){return{service:{name:null,description:null,isActive:!0},successMessage:{group:"foo",title:"Sucesso!",text:"Operação realizada com êxito.",type:"success"},errorMessage:{group:"foo",title:"Atenção!",text:"Operação não realizada, contate o adminstrador da aplicação.",type:"error"},attentionMessage:{group:"foo",title:"Atenção!",text:"Preencha todas as informações necessárias.",type:"error"}}},methods:{hide:function(){this.$emit("hide")},setName:function(e){this.service.name=e},setDescription:function(e){this.service.description=e},createUpdateService:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark(function t(){var r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:try{r={name:e.service.name,description:e.service.description,isActive:e.service.isActive},e.oldService.id?e.updateService(r):e.createService(r)}catch(i){console.log(i)}case 1:case"end":return t.stop()}},t)}))()},createService:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,o["a"].post("service/new",e).then(function(e){if(e.data.errors)t.$notify({group:"foo",title:"Cuidado!",text:e.data.errors[0].message,type:"warn"});else{if(!e)throw"Aconteceu algum na hora de criar o serviço, contate o adminstrador.";t.$notify({group:"foo",title:"Sucesso!",text:"Serviço criado.",type:"success"}),t.service.name=null,t.service.description=null,t.hide()}}).catch(function(e){t.$notify({group:"foo",title:"Erro!",text:e,type:"error"})});case 2:case"end":return r.stop()}},r)}))()},updateService:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,o["a"].put("service/update/".concat(t.oldService.id),e).then(function(e){if(e.data.errors)t.$notify({group:"foo",title:"Cuidado!",text:e.data.errors[0].message,type:"warn"});else{if(!e)throw"Aconteceu algum na hora de atualizar o serviço, contate o adminstrador.";t.$notify({group:"foo",title:"Sucesso!",text:"Serviço atualizado.",type:"success"}),t.service.name=null,t.service.description=null,t.hide()}}).catch(function(e){t.$notify({group:"foo",title:"Erro!",text:e,type:"error"})});case 2:case"end":return r.stop()}},r)}))()},deleteService:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o["a"].put("service/archive/".concat(e.oldService.id),{isActive:!e.oldService.isActive}).then(function(){e.$notify(e.successMessage),e.service.name=null,e.service.description=null,e.service.isActive=!0,e.hide()});case 3:t.next=8;break;case 5:t.prev=5,t.t0=t["catch"](0),e.$notify(e.errorMessage);case 8:case"end":return t.stop()}},t,null,[[0,5]])}))()}}},p=d,f=(r("b789"),r("2877")),m=Object(f["a"])(p,a,s,!1,null,"8d39120c",null),h=m.exports,S=r("b929"),g=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"service-card"},[r("div",{staticClass:"information-container"},[r("span",{staticClass:"is-size-4 has-text-weight-bold"},[e._v(e._s(e.service.name))]),r("span",{staticClass:"service-description"},[e._v(e._s(e.service.description))])]),r("div",{staticClass:"right-container"},[e.service.isActive?e._e():r("span",{staticClass:"archived-tag"},[e._v("Arquivado")]),r("div",{staticClass:"edition-container",on:{click:e.onClick}},[r("i",{staticClass:"fas fa-pen"}),r("span",[e._v("Editar")])])])])},C=[],x={name:"serviceCard",props:{service:{type:Object,required:!0}},methods:{onClick:function(){this.$emit("modalControl",this.service)}}},b=x,w=(r("66a3"),Object(f["a"])(b,g,C,!1,null,null,null)),y=w.exports,_={name:"service",components:{ServiceControl:h,Button:S["a"],Title:l["a"],ServiceCard:y},data:function(){return{showServiceControl:!1,services:[],oldService:{id:null,name:"",description:"",isActive:!0}}},mounted:function(){this.getServiceList()},methods:{getServiceList:function(){var e=this;o["a"].get("service/all").then(function(t){e.services=t.data}).catch(function(){e.$notify({group:"foo",title:"Erro!",text:"Não foi possível obter a lista de serviços.",type:"error"})})},modalControl:function(e){this.oldService="newService"===e||"close"===e?{id:null,name:"",description:"",isActive:!0}:e,this.showServiceControl=!this.showServiceControl,this.getServiceList()}}},k=_,A=(r("2c0b"),Object(f["a"])(k,i,n,!1,null,null,null));t["default"]=A.exports},"66a3":function(e,t,r){"use strict";var i=r("74fb"),n=r.n(i);n.a},"74fb":function(e,t,r){},b789:function(e,t,r){"use strict";var i=r("ff44"),n=r.n(i);n.a},d2e9:function(e,t,r){},ff44:function(e,t,r){}}]);
//# sourceMappingURL=chunk-24409d78.8b869bdc.js.map